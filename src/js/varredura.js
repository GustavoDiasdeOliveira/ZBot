// Fun√ß√£o para adicionar mensagens no chat
function addMessage(msg, isUser = false) {
  const chat = document.querySelector(".msger-chat");
  const msgElement = document.createElement("div");

  msgElement.classList.add("msg");
  if (isUser) {
    msgElement.classList.add("right-msg");
  } else {
    msgElement.classList.add("left-msg");
  }

  msgElement.innerHTML = `
        <div class="msg-img" style="background-image: url(src/images/${isUser ? "user.jpeg" : "bot.jpg"
    });"></div>
        <div class="msg-bubble">
            <div class="msg-info">
                <div class="msg-info-name">${isUser ? "Zukker" : "Mary"}</div>
                <div class="msg-info-time">${new Date()
      .toLocaleTimeString()
      .slice(0, 5)}</div>
            </div>
            <div class="msg-text">${msg}</div>
        </div>
    `;

  chat.appendChild(msgElement);
  chat.scrollTop = chat.scrollHeight; // Rolagem autom√°tica
}

// Fun√ß√£o para mostrar o "digitando..." e depois a resposta do bot
function typingIndicator(callback) {
  const chat = document.querySelector(".msger-chat");

  // Adiciona a mensagem "digitando..."
  const typingMessage = document.createElement("div");
  typingMessage.classList.add("msg");
  typingMessage.innerHTML = `
        <div class="msg-img" style="background-image: url(src/images/bot.jpg);"></div>
        <div class="msg-bubble" id="BOT">
            <div class="msg-info">
                <div class="msg-info-name">Mary</div>
                <div class="msg-info-time">${new Date()
      .toLocaleTimeString()
      .slice(0, 5)}</div>
            </div>
            <div class="msg-text"><span class="dots"><span></span><span></span><span></span></span></div>
        </div>
    `;
  chat.appendChild(typingMessage);
  chat.scrollTop = chat.scrollHeight;

  // Anima√ß√£o dos tr√™s pontos
  const dots = typingMessage.querySelector(".dots");
  let dotCount = 0;
  const interval = setInterval(() => {
    dotCount = (dotCount + 1) % 4;
    dots.querySelectorAll("span").forEach((span, index) => {
      span.style.opacity = index + 1 <= dotCount ? 1 : 0.3;
    });
  }, 500);

  // Simula um tempo de "digitando..."
  setTimeout(() => {
    clearInterval(interval); // Para a anima√ß√£o
    chat.removeChild(typingMessage); // Remove a mensagem "digitando..."
    callback(); // Chama a fun√ß√£o para adicionar a resposta real do bot
  }, 2000); // Tempo de "..." antes de mostrar a resposta real
}

// Fun√ß√£o para limpar o chat
function clearChat() {
  const chat = document.querySelector(".msger-chat");
  chat.innerHTML = ""; // Limpa todo o conte√∫do do chat
}

// Fun√ß√£o para inicializar o chat com a primeira mensagem do bot
function startChat() {
  currentStep = "inicio"; // Reseta o passo atual para "inicio"
  clearChat(); // Limpa o chat
  typingIndicator(() => {
    addMessage(
      "Ol√°! Escolha uma op√ß√£o: <br> 1Ô∏è‚É£ Varredura e Pesquisa de Site <br> 2Ô∏è‚É£ Master <br> 3Ô∏è‚É£ Pesquisa PP <br> 4Ô∏è‚É£ Encarte <br> ",
    );
  });
}

// Fun√ß√£o para lidar com a escolha do usu√°rio
function handleUserChoice(choice) {
  let response = "";

  // Normaliza a escolha do usu√°rio para facilitar a compara√ß√£o (tudo min√∫sculo)
  const normalizedChoice = choice.toLowerCase();

  // Verifica se a op√ß√£o √© "0" para voltar ao in√≠cio
  if (normalizedChoice === "0" || normalizedChoice.includes("voltar")) {
    addMessage("üîÑ Voltando...", false); // Mensagem do bot indicando que est√° voltando
    setTimeout(() => {
      startChat();
    }, 2500); // Pequeno atraso para simular transi√ß√£o
    return;
  }

  // L√≥gica para o in√≠cio do chat
  if (currentStep === "inicio") {
    if (normalizedChoice === "1" || normalizedChoice.includes("varredura")) {
      response = `üìå Voc√™ escolheu Varredura. Selecione uma op√ß√£o:<br><br>
      1Ô∏è‚É£ O que √© Varredura?<br>
      2Ô∏è‚É£ O que √© Pesquisa de site?<br>
      3Ô∏è‚É£ Produtos abreviados<br>
      4Ô∏è‚É£ Itens de embalagem promocional<br>
      5Ô∏è‚É£ Sobre o Qtd<br>
      6Ô∏è‚É£ Produtos Diferentes e Sin√¥nimos<br>
      7Ô∏è‚É£ Fam√≠lia<br>
      0Ô∏è‚É£ Voltar`;
      currentStep = "varredura";

    } else if (normalizedChoice === "2" || normalizedChoice.includes("master")) {
      response = `üìå Voc√™ escolheu Master. Selecione uma op√ß√£o:<br><br>
      1Ô∏è‚É£ D√∫vida na descri√ß√£o<br>
      2Ô∏è‚É£ Quais aplicativos usar no Master?<br>
      0Ô∏è‚É£ Voltar`;
      currentStep = "master";

    } else if (normalizedChoice === "3" || normalizedChoice.includes("pesquisa pp")) {
      response = `üìå Voc√™ escolheu Pesquisa PP. Selecione uma op√ß√£o:<br><br>
      1Ô∏è‚É£ O que √© Pesquisa PP?<br>
      2Ô∏è‚É£ Onde √© feita a pesquisa?<br>
      3Ô∏è‚É£ Itens de Primeiro Pre√ßo (PP) Sem Marca<br>
      4Ô∏è‚É£ Como usar a Calculadora?<br>
      0Ô∏è‚É£ Voltar`;
      currentStep = "Pesquisa PP";

    } else if (normalizedChoice === "4" || normalizedChoice.includes("encarte")) {
      response = `üìå Voc√™ escolheu Encarte. Selecione uma op√ß√£o:<br><br>
      1Ô∏è‚É£ O que √© um encarte/jornal?<br>
      2Ô∏è‚É£ Onde s√£o enviados os encartes?<br>
      3Ô∏è‚É£ Como subir encarte?<br>
      4Ô∏è‚É£ Como adicionar pre√ßo no encarte?<br>
      5Ô∏è‚É£ Dica para salvar a foto do encarte!<br>
      0Ô∏è‚É£ Voltar`;
      currentStep = "encarte";

    // } else if (normalizedChoice === "5" || normalizedChoice.includes("bonus")) {
    //   response = `üö™ Voc√™ escolheu Bonus. Selecione uma op√ß√£o:<br><br>
    //   1Ô∏è‚É£ Qual √© a senha da internet? üîêüòé<br>
    //   0Ô∏è‚É£ Voltar`;
    //   currentStep = "Bonus";
    } else {
      response = "‚ùå Op√ß√£o inv√°lida! Escolha uma das op√ß√µes acima.";
    }
  }

  // L√≥gica para o passo "varredura"
  else if (currentStep === "varredura") {
    switch (normalizedChoice) {
      case "1":
      case normalizedChoice.includes("varredura") && normalizedChoice:
        response = `üîé Como Funciona a Varredura?<br><br>
        A <b>varredura</b> √© um processo no qual o <b>rob√¥</b> baixa todos os itens de um site 
        concorrente. Ap√≥s isso, associamos esses itens aos produtos do cliente dentro do <b>Gest√£o</b>.<br><br>
        üìå <b>Passos:</b><br><br>
        1. Acesse o Gest√£o e v√° para Produtos.<br>
        2. Busque pelo item usando marca e peso.<br>
        3. Associe o item ao produto concorrente baixado.<br><br>
        ‚úÖ Isso garante a correta identifica√ß√£o e associa√ß√£o dos itens.`;
        break;

      case "2":
      case normalizedChoice.includes("pesquisa de site") && normalizedChoice:
        response = `üîç Como funciona a pesquisa de site?<br><br>
        A <b>pesquisa</b> busca produtos espec√≠ficos no site do concorrente.<br>
        üìå <b>Passos:</b><br><br>
        1. Busque o produto por marca e peso.<br>
        2. Copie o link do produto encontrado.<br>
        3. Cole o link na planilha ao lado do item.<br><br>
        ‚úÖ Isso assegura uma pesquisa completa e correta.`;
        break;

      case "3":
      case normalizedChoice.includes("produtos abreviados") && normalizedChoice:
        response = `üîé Muitos produtos t√™m abrevia√ß√µes como <b>IOG</b> (Iogurte) ou <b>REQ</b> (Requeij√£o).<br><br>
        üìå <b>Dica:</b> Use abrevia√ß√µes para agilizar a pesquisa e filtre por marca e peso.<br><br>
        Exemplo: <b>IOG DANONE 160G.</b><br><br>
        Clique <a href='https://gustavodiasdeoliveira.github.io/abreviador/' target='_blank'>aqui</a> para abrir o abreviador do Team Virtual.`;
        break;
        
      case "4":
      case normalizedChoice.includes("Itens de embalagem promocional") && normalizedChoice:
        response = `üîé <b>Produtos com embalagem promocional</b> possuem diferen√ßas importantes: <b>UN (unidade) e LV+ PG- (leve mais, pague menos)</b> 
        pertencem a <b>fam√≠lias diferentes.</b> Sempre verifique a <b>descri√ß√£o</b> e o <b>EAN</b> para garantir a associa√ß√£o correta.`;
        break;

      case "5":
      case normalizedChoice.includes("qtd") && normalizedChoice:
        response = `üîé O que √© Qtd?<br><br>
        <b>Qtd</b> significa <b>quantidade</b> e √© a forma como o sistema diferencia itens vendidos por <b>caixa</b> e por <b>unidade.</b>`;
        break;

        case "7":
          case normalizedChoice.includes("familia") && normalizedChoice:
            response = `Na precifica√ß√£o de mercados, <b>produto fam√≠lia</b> se refere a um grupo de produtos similares que 
            compartilham caracter√≠sticas em comum, como <b>marca, categoria, tamanho ou fun√ß√£o.</b><br><br>
            Dessa forma, se uma pesquisa listar variantes de um mesmo produto, como <b>Tempero Saz√≥n Carne 60g</b> e <b>Tempero Saz√≥n 
            Frango 60g</b>, mas exibir apenas uma delas, a coleta pode ser realizada, desde que os itens tenham a <b>mesma marca, peso e fragr√¢ncia.</b><br><br>
            <b.üìå Aten√ß√£o:</b> Produtos que possuem varia√ß√£o de <b>tempero</b>, como <b>pipoca</b>, n√£o seguem essa mesma regra.<br><br>
            üîç Essa orienta√ß√£o tamb√©m se aplica √† Pesquisa de Site. Em caso de d√∫vida, <b>consulte o assistente, analista ou supervisora.</b>`;
            break;
    
          case "6":
          case normalizedChoice.includes("Produtos Diferentes e Sin√¥nimos") && normalizedChoice:
            response = `üîé Produtos Diferentes e Sin√¥nimos<br>
            Existem itens que, apesar de parecerem iguais, s√£o <b>produtos diferentes.</b><br><br>
            <b>üìå Exemplos:</b><br>
            <b>1. Banana Prata</b> e <b>Banana Nanica</b> s√£o variedades distintas e n√£o devem ser confundidas.<br>
            2. Produtos <b>com osso</b> e <b>sem osso</b> tamb√©m s√£o sempre diferentes e <b>n√£o podem ser coletados como equivalentes.</b><br><br>
            Al√©m disso, <b>h√° itens semelhantes</b>, mas com nomes diferentes dependendo da regi√£o. Por exemplo, <b>Cox√£o mole</b> e <b>Ch√£ de Dentro</b> podem se referir ao mesmo produto.<br>
            üîç Para esses casos, voc√™ pode <b>verificar</b> a <b>similaridade</b> dentro da nossa base de dados, clique aqui: <a href='https://lookerstudio.google.com/u/0/reporting/861c449e-7b93-4e21-ac16-f99021c89015/page/QHJ4D' target='_blank'>Sinonimos Qualidade</a> e
            <a href='https://docs.google.com/spreadsheets/d/1HG1HQ2F7WtbmYY4fT6aLbL5zDvSxf2Wy/edit?gid=2066530975#gid=2066530975' target='_blank'>FLV item compativel</a><br> ou at√© mesmo consultar informa√ß√µes adicionais no Google. <br>‚úÖ Sempre verifique a descri√ß√£o e o EAN para garantir a associa√ß√£o correta.`;
            break;

      default:
        response = "‚ùå Op√ß√£o inv√°lida! Escolha entre 1 a 7.";
    }
  }


  // L√≥gica para o passo "master"
  else if (currentStep === "master") {
    if (normalizedChoice === "1" ||
      normalizedChoice.includes("duvida na descri√ß√£o")
    ) {
      response =
        `<b>üîé D√∫vidas na Descri√ß√£o?</b><br><br>
        No site do <b>Danieli</b>, alguns itens podem aparecer com a <b>descri√ß√£o incompleta</b>.<br><br>
        üìå <b>Quando isso ocorrer</b>, use o <b>item anterior e o sucessor</b> como <b>refer√™ncia</b> para identificar corretamente o produto.<br><br>
        <b>‚úÖ Em caso de d√∫vidas</b>, consulte seu <b>superior</b> para garantir a associa√ß√£o correta.`;
    } else if (
      normalizedChoice === "2" ||
      normalizedChoice.includes("Quais aplicativos usar no Master?")
    ) {
      response =
        `<b>Localiza√ß√£o</b><br><br>
        
        <b>üìçDanieli:</b> NFG com a localiza√ß√£o <b>Tapejara loja Atacarejo.</b><br>
        <b>üìçFarma Erechim:</b> NFG com a localiza√ß√£o <b>Erechim/RS.</b><br>
        <b>üìçBusca Pre√ßo e Gondola:</b> Baita Busca, On Passarela e NFG com a localiza√ß√£o <b>Erechim/RS.</b><br>
        <b>üìçPP Passarela:</b> Baita Busca com a localiza√ß√£o <b>Erechim/RS</b> e <b>On Passarela.</b>`;
    }  else {
      response = "‚ùå Op√ß√£o inv√°lida! Escolha uma dessas op√ß√µes.";
    }
  }

  // L√≥gica para o passo "Pesquisa PP"
  else if (currentStep === "Pesquisa PP") {
    if (
      normalizedChoice === "1" ||
      normalizedChoice.includes("O que √©?")
    ) {
      response =
        `<b>ü§î O que √© PP?</b><br><br>
        A pesquisa de <b>produtos de primeiro pre√ßo (PP)</b> tem como objetivo ajudar o
        cliente a encontrar <b>novos fornecedores mais baratos</b> e come√ßar a comercializar esses itens.<br><br>
        <b>üìå Na coleta de itens PP</b>, √© permitido coletar produtos com at√© <b>30% de diferen√ßa de pre√ßo</b> em rela√ß√£o ao valor original.<br><br>
        
        üë®‚Äçüíªüë©‚Äçüíª Para garantir o menor pre√ßo na coleta, use a Calculadora PP dispon√≠vel <a href='https://gustavodiasdeoliveira.github.io/Calculadora-PP/' target='_blank'>aqui</a>, que ajuda a encontrar o menor pre√ßo por produto.<br><br>
        <b>‚úÖ Observa√ß√£o:</b> Caso encontre o produto <b>mais barato</b> dentro da margem de <b>30% de diferen√ßa</b>, voc√™ pode colet√°-lo, mesmo que o peso seja menor que o do produto original.`;
    } else if (
      normalizedChoice === "2" ||
      normalizedChoice.includes("onde √© feito a pesquisa?")
    ) {
      response =
        `Cada loja √© feita em um site diferente. No Danielli a pesquisa dever√°
        ser<b> APENAS no aplicativo NFG</b> com a <b>localiza√ß√£o Tapejara loja Atacarejo</b><br><br>
        
        J√° no <b>Passarela</b> pode ser realizada tanto no <b>Baita Busca quanto no On Passarela.</b><br><br>
        
        <b>üìå Requisito importante:</b> Toda pesquisa de <b>PP no Passarela</b> deve ser acompanhada de <b>evid√™ncia</b>. A evid√™ncia precisa incluir:<br>
        1. Print da tela <b>inteira</b>.<br>
        2. Mostrando a <b>descri√ß√£o da planilha.</b><br>
        3. O produto coletado, especificando se foi no <b>Baita Busca ou On Passarela.</b><br>
        4. A <b>data e hor√°rio</b> da pesquisa.<br><br>
        ‚úÖ Em caso de d√∫vida, consulte o <b>assistente, analista ou a supervisora para mais orienta√ß√µes.</b>`;
    } else if (
      normalizedChoice === "3" ||
      normalizedChoice.includes("itens do primeiro pre√ßo (pp) sem marca")
    ) {
      response =
        `Nos casos de itens PP, <b>n√£o podemos coletar produtos sem marca.</b><br><br>
        üìå A maioria desses itens sem marca geralmente se encontra nas se√ß√µes de <b>a√ßougue</b> ou <b>FLV 
        (Frutas, Legumes e Verduras)</b>, especialmente quando s√£o solicitados por <b>quilo</b>, como por exemplo:<br><br>
        <b>PEITO FGO C/O CONG. KG, SOBRECOXA C/DORSO CONG. KG</b>, entre outros.<br><br>
        
        ‚úÖ Em caso de d√∫vida, consulte o <b>assistente, analista</b> ou a <b>supervisora</b> para garantir a coleta correta.`;
    } else if (
      normalizedChoice === "4" ||
      normalizedChoice.includes("como usar a calculadora?")
    ) {
      response =
        `üîé A <b>Calculadora PP</b> serve para calcular a varia√ß√£o de <b>30% (m√°ximo e m√≠nimo)</b> que um produto <b>PP</b> pode ter.<br><br>
      
      <b>üìå Como usar:</b><br>
      1. Adicione o <b>pre√ßo do produto.</b><br>
      2. A quantidade deve ser <b>1.</b><br>
      3. Escolha a unidade de medida <b>(grama, quilo ou ml).</b><br>
      4. Clique em <b>calcular</b>, e a calculadora ir√° mostrar o pre√ßo <b>m√≠nimo e m√°ximo considerando a varia√ß√£o de 30%.</b><br>
      ‚úÖ Observa√ß√£o: Se o item for apenas unidade, preencha apenas a quantidade. <a href='https://gustavodiasdeoliveira.github.io/Calculadora-PP/' target='_blank'>Clique aqui para acessar a Calculadora PP</a>`;
    } else {
      response = "‚ùå Op√ß√£o inv√°lida! Escolha entre 1 a 4.";
    }
  }

  // L√≥gica para o passo "Encarte"
  else if (currentStep === "encarte") {
    if (
      normalizedChoice === "1" ||
      normalizedChoice.includes("o que √© encarte?")
    ) {
      response =
        `<b>üì¢ O que √© um encarte/jornal de ofertas?</b><br><br>
        O </b>encarte</b> ou </b>jornal de ofertas</b> √© um material publicit√°rio impresso ou 
        digital que <b>divulga promo√ß√µes e descontos de um supermercado</b>. Ele √© 
        distribu√≠do <b>fisicamente nas lojas</b>, publicado em jornais ou digitalmente 
        por WhatsApp, redes sociais e sites dos mercados. 
        O objetivo √© <b>atrair clientes e aumentar as vendas</b>.`;
    } else if (
      normalizedChoice === "3" ||
      normalizedChoice.includes("como subir encarte?")
    ) {
      response =
        ` <b>üõ†Ô∏è Como cadastrar um encarte no ADM Zukkin?</b><br><br>
        
        1. Acesse <b>ADM Zukkin</b> e v√° para <b>Qualidade > Ofertas.</b><br>
        2. Clique na <b>seta ao lado de Visualizar</b> e selecione <b>Adicionar Ofertas.</b><br>
        3. Clique no <b>bot√£o verde</b> e <b>preencha</b> os <b>campos:</b><br>
        <b> - Bandeira:</b> Nome da loja do encarte.<br>
        <b> - Origem:</b> Selecione sempre Encarte.<br>
        <b> - Descri√ß√£o:</b> Nome do encarte (em destaque no material).<br>
        <b> - Estabelecimento:</b> Loja das ofertas.<br>
        <b> - Capa:</b> Imagem <b>JPEG/PNG</b> da primeira p√°gina (m√°x. 1MB).<br>
        <b> - Arquivo:</b> PDF completo do encarte.<br><br>
        <b>üìå Importante!</b> N√£o esque√ßa de <b>preencher</b> a <a href='https://docs.google.com/spreadsheets/d/1km_WXEM8ppKkH8M4-E2ZjlidgF2y2w-l/edit?pli=1&gid=558881161#gid=558881161' target='_blank'>planilha de acompanhamento.</a><br><br>
        üé• Veja o <a href='https://adm.zukk.in/processos?ID=76' target='_blank'>treinamento em v√≠deo</a> para mais detalhes.`;
    } else if (
      normalizedChoice === "4" ||
      normalizedChoice.includes("como adicionar pre√ßo")
    ) {
      response =
        `<b>üìù Como preencher os pre√ßos do encarte?</b><br><br>
        <b>1Ô∏è‚É£ Localize o encarte</b> na <a href='https://docs.google.com/spreadsheets/d/1km_WXEM8ppKkH8M4-E2ZjlidgF2y2w-l/edit?pli=1&gid=558881161#gid=558881161' target='_blank'>planilha de acompanhamento</a><br>
        <b>2Ô∏è‚É£ Em Ofertas</b> altere o <b>Per√≠odo</b> para uma data anterior √† do encarte que ser√° preenchido.<br>
        3Ô∏è‚É£ Atualize a p√°gina clicando na <b>seta verde</b> e, na <b>Busca R√°pida</b>, procure a <b>descri√ß√£o do encarte</b>.<br>
        4Ô∏è‚É£ Clique no <b>√≠cone do l√°pis</b> para editar.<br>
        5Ô∏è‚É£ V√° em <b>Adicionar Pre√ßo</b> e busque o produto.<br>
        <b>-</b> Para facilitar a busca, utilize a se√ß√£o <b>Produtos do Cliente</b> dentro do <b>Gest√£o</b>.<br><br>
        ‚ùó Aten√ß√£o aos tipos de pre√ßos.<br>
        <b>‚úÖ Pre√ßo de Encarte:</b> Sempre preenchido como promo√ß√£o.<br>
        <b>‚úÖ Pre√ßo de Fidelidade:</b> Se for pre√ßo especial de cart√£o de loja, clube de ofertas, etc.<br>
        <b>‚úÖ Pre√ßo de Atacado:</b> Caso tenha quantidade m√≠nima para compra.<br>
        <b>‚ùå Ignore pre√ßos de Cashback e a partir de...</b> ‚Äì esses n√£o precisam ser coletados.<br>
        üé• Para mais detalhes, veja o <a href='https://adm.zukk.in/processos?ID=76' target='_blank'>treinamento em v√≠deo.</a>`;
    } else if (
      normalizedChoice === "2" ||
      normalizedChoice.includes("onde s√£o enviados os encartes?")
    ) {
      response =
        `<b>üì® Onde s√£o enviados os encartes?</b><br><br>
        Os encartes podem ser obtidos de duas formas:<br>
        <b>1¬∫ Busca no Site üîç</b><br>
        <b> - </b> Acesse o site da loja e procure pela se√ß√£o <b>"Ofertas"</b> ou <b>"Encarte"</b>.<br>
        <b> - </b> Baixe as imagens ou o PDF publicado.<br>
        <b> - </b> Insira o encarte no sistema.<br><br>
        <b>2¬∫ Coleta no Discord üí¨</b><br>
        <b> - </b> Alguns encartes s√£o enviados diretamente pelos concorrentes no <b>WhatsApp</b> e repassados para o grupo de <b>encarte</b> no Discord.<br><br>
        <b>üîπ Dicas: </b> Para concorrentes que exigem busca no site, consulte a aba <b>Sites</b> da
        <a href='https://docs.google.com/spreadsheets/d/1km_WXEM8ppKkH8M4-E2ZjlidgF2y2w-l/edit?pli=1&gid=920705557#gid=920705557' target='_blank'>planilha de acompanhamento</a>
        para verificar quais devem ser coletados.<br>
        Sempre verifique se o encarte j√° foi coletado no Discord e no <a href='https://docs.google.com/spreadsheets/d/1km_WXEM8ppKkH8M4-E2ZjlidgF2y2w-l/edit?pli=1&gid=920705557#gid=920705557' target='_blank'>Acompanhamento</a><br>
        Caso n√£o tenha sido coletado, salve o encarte e siga o processo de envio.`;
    } else if (
      normalizedChoice === "5" ||
      normalizedChoice.includes("dica para salvar a foto do encarte")
    ) {
      response =
        `<b>üìå Dica para salvar a foto do encarte!</b><br><br>
        <b>üòé Passo a passo:</b><br>
        <b>1Ô∏è‚É£ Tire um print</b> de todo o encarte e salve em <b>JPG ou PNG.</b><br>
        <b>2Ô∏è‚É£ Converta para PDF</b> usando <a href='https://www.ilovepdf.com/' target='_blank'>iLovePDF.com.</a><br>
        <b>3Ô∏è‚É£ Para a capa</b>, tire um print separado e garanta que tenha no m√°ximo <b>1MB</b> e esteja em <b>JPG ou PNG</b><br>
        4Ô∏è‚É£ Se precisar, converta <b>JPG para PNG</b> no site <a href='https://jpg2png.com/' target='_blank'>jpg2png.com.</a><br><br>
        <b>üì¢ Importante:</b> O tamanho correto e o formato adequado garantem que o sistema aceite o arquivo sem problemas! üòä`;
    } else {
      response = "‚ùå Op√ß√£o inv√°lida! Escolha entre 1 a 4.";
    }
  }

  // L√≥gica para o passo "Bonus"
  else if (currentStep === "Bonus") {
    if (normalizedChoice === "1" || normalizedChoice.includes("Senha")) {
      response = "üîë zukkin2025 ou Zukkin2025 em todas as redes üîë";
    } else {
      response = "‚ùå Op√ß√£o inv√°lida! Escolha apenas 1";
    }
  }

  // Chama a fun√ß√£o que simula "digitando..." e depois exibe a resposta
  typingIndicator(() => {
    addMessage(response); // Adiciona a resposta real do bot
  });
}

// Lida com o envio da mensagem do usu√°rio
document
  .querySelector(".msger-inputarea")
  .addEventListener("submit", function (event) {
    event.preventDefault();

    const input = document.querySelector(".msger-input");
    const userMessage = input.value.trim();

    if (userMessage) {
      // Adiciona a mensagem do usu√°rio
      addMessage(userMessage, true);

      // Processa a resposta do bot com base na escolha
      handleUserChoice(userMessage);

      // Limpa o campo de entrada
      input.value = "";
    }
  });

// Fun√ß√£o para alternar o tema de fundo (Dark/Light)
function toggleBackground() {
  document.body.classList.toggle("dark-theme");
  const changeBgBtn = document.querySelector(".change-bg");
  changeBgBtn.innerHTML = document.body.classList.contains("dark-theme")
    ? '<i class="bx bx-sun"></i>'
    : '<i class="bx bx-moon"></i>';
}

// Inicializa o chat com a primeira mensagem automaticamente
startChat();
